import { Collision } from "../engine/collision.js";
import { Human } from "./human.js";

export class Man extends Human {
  public capacityHistory: number[] = [];

  constructor(
    public capacity: number,
    decayRange: [number, number],
  ) {
    super(
      capacity,
      0.03,
      breakupReasons,
      thoughtList,
      emojiList,
      exGoodQuotes,
      exGoodEmojis,
      exBadQuotes,
      exBadEmojis,
      decayRange,
    );
  }

  public override liveOneDay(day: number) {
    // Gradually reduce capacity over time (fatigue).
    this.decayCapacity(day);

    super.liveOneDay(day);
  }

  public override emote(delta: number) {
    // Add daily emotional change to value.
    this.value += delta;

    // Clamp value softly if it exceeds max capacity:
    // Reflects excess back downward (no hard stop).
    if (this.value > this.capacity) {
      const excess = this.value - this.capacity;
      this.value = this.capacity - excess;
    } else if (this.value < 0) {
      this.value = -this.value;
    }
  }

  public decayCapacity(day: number) {
    // If within the decay period, apply quadratic decay.
    if (day <= this.decayDuration) {
      const progress = day / this.decayDuration;

      // Reduce capacity over time toward 100:
      // Starts slowly, speeds up with time (progress¬≤).
      this.capacity = this.capacity - progress ** 2 * (this.capacity - 100);
    }
  }

  public override save() {
    super.save();
    this.capacityHistory.push(this.capacity);
  }

  public looseCapacity(multiplier = 0.9) {
    this.capacity *= multiplier;
  }

  public retainCapacity() {
    this.capacity /= Math.sqrt(0.9);
  }
}

// 0-49 is neutral into positive.
// 50-99 is negative into neutral.
// Same for thoughts.
const emojiList = [
  "üòê",
  "üôÇ",
  "üòå",
  "üòä",
  "‚ò∫Ô∏è",
  "üòá",
  "üòâ",
  "üòÉ",
  "üòÑ",
  "üòÅ",
  "üòÜ",
  "üòã",
  "üòé",
  "üòç",
  "ü§©",
  "ü•∞",
  "üòò",
  "üòö",
  "üòô",
  "ü§ó",
  "üò∫",
  "üòª",
  "üòÄ",
  "üò∏",
  "üòΩ",
  "ü§†",
  "üòá",
  "üòÑ",
  "üòÉ",
  "üòÅ",
  "üòÜ",
  "üòÖ",
  "üò∫",
  "üòé",
  "ü§ó",
  "ü•∞",
  "üòò",
  "üòã",
  "üòå",
  "üòä",
  "üòÑ",
  "üòÄ",
  "‚ò∫Ô∏è",
  "üòâ",
  "üòá",
  "üòé",
  "üôÇ",
  "üòÉ",
  "üòÑ",
  "üòô",
  "üòΩ",
  // Half.
  "üò±",
  "üò®",
  "üò∞",
  "üòñ",
  "üò£",
  "ü•∫",
  "üò¢",
  "üò≠",
  "‚òπÔ∏è",
  "üôÅ",
  "üòû",
  "üòü",
  "üòî",
  "üò©",
  "üò´",
  "ü•¥",
  "üòµ‚Äçüí´",
  "ü•µ",
  "ü•∂",
  "üòì",
  "üòø",
  "üòæ",
  "üòí",
  "üò§",
  "üò†",
  "üò°",
  "ü§¨",
  "üò∂",
  "üòë",
  "ü´•",
  "ü´†",
  "üòµ",
  "ü§Ø",
  "üò¨",
  "üôÑ",
  "üò©",
  "üòÆ‚Äçüí®",
  "üò∑",
  "ü§¢",
  "ü§Æ",
  "üòï",
  "üòñ",
  "üò£",
  "üòî",
  "üòì",
  "üò∂‚Äçüå´Ô∏è",
  "üò¢",
  "üò≠",
  "üò©",
  "üòø",
  "üòû",
];

const thoughtList = [
  "–í—Å—ë —Ä–æ–≤–Ω–æ",
  "–ü–æ–∂–∞–ª—É–π, –≤—Å—ë —Ö–æ—Ä–æ—à–æ",
  "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–ª—É—á—à–µ",
  "–û–Ω–∞ —Ä—è–¥–æ–º ‚Äî –∏ —ç—Ç–æ —Ä–∞–¥—É–µ—Ç",
  "–ß—É–≤—Å—Ç–≤—É—é –ª—ë–≥–∫–æ—Å—Ç—å",
  "–ú–Ω–µ —Å–ø–æ–∫–æ–π–Ω–æ",
  "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –±—ã—Ç—å —Å –Ω–µ–π",
  "–í—Å—ë —Å–≤–µ—Ç–ª–µ–µ",
  "–û–Ω–∞ –¥–µ–ª–∞–µ—Ç –º–æ–π –¥–µ–Ω—å",
  "–£–ª—ã–±–∞—é—Å—å –≤–Ω—É—Ç—Ä–∏",
  "–° –Ω–µ–π —Ç–µ–ø–ª–æ",
  "–•–æ—Ä–æ—à–æ, —á—Ç–æ –º—ã –≤–º–µ—Å—Ç–µ",
  "–ú–Ω–µ –ø–æ–≤–µ–∑–ª–æ",
  "–ú—ã –ø–æ–¥—Ö–æ–¥–∏–º –¥—Ä—É–≥ –¥—Ä—É–≥—É",
  "–ß—É–≤—Å—Ç–≤—É—é —Å–µ–±—è —Å–æ–±–æ–π",
  "–°–µ—Ä–¥—Ü–µ —Å–ø–æ–∫–æ–π–Ω–æ",
  "–£ –Ω–∞—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è",
  "–•–æ—á–µ—Ç—Å—è –µ—ë –æ–±–Ω—è—Ç—å",
  "–û–Ω–∞ –º–µ–Ω—è –ø–æ–Ω–∏–º–∞–µ—Ç",
  "–≠—Ç–æ –ø—Ä–∏—è—Ç–Ω–æ",
  "–Ø —á—É–≤—Å—Ç–≤—É—é –ª—é–±–æ–≤—å",
  "–û–Ω–∞ –≤–∞–∂–Ω–∞ –¥–ª—è –º–µ–Ω—è",
  "–Ø —Ö–æ—á—É –µ—ë —Ä–∞–¥–æ–≤–∞—Ç—å",
  "–û–Ω–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Å–≤–µ—Ç",
  "–õ—é–±–ª—é –µ—ë –≥–æ–ª–æ—Å",
  "–Ø –≤–ª—é–±–ª—ë–Ω",
  "–ú—ã –≤ –≥–∞—Ä–º–æ–Ω–∏–∏",
  "–° –Ω–µ–π —Ö–æ—Ä–æ—à–æ –º–æ–ª—á–∞—Ç—å",
  "–Ø —Å—á–∞—Å—Ç–ª–∏–≤",
  "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å –Ω–µ–π –ª—É—á—à–µ",
  "–Ø –¥—ã—à—É –µ–π",
  "–•–æ—á—É –±—ã—Ç—å —Ä—è–¥–æ–º –≤—Å–µ–≥–¥–∞",
  "–û–Ω–∞ ‚Äî —á–∞—Å—Ç—å –º–µ–Ω—è",
  "–ù–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ, –∫—Ä–æ–º–µ –Ω–µ—ë",
  "–û–Ω–∞ –≤—Å—ë –¥–ª—è –º–µ–Ω—è",
  "–ú—ã –æ–¥–Ω–æ —Ü–µ–ª–æ–µ",
  "–° –Ω–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ",
  "–û–Ω–∞ ‚Äî –º–æ–π –¥–æ–º",
  "–û–Ω–∞ –¥–∞—ë—Ç –º–Ω–µ —Å–∏–ª—ã",
  "–Ø –Ω–∞—à—ë–ª —Å–≤–æ—ë",
  "–≠—Ç–æ –ª—é–±–æ–≤—å",
  "–û–Ω–∞ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—è",
  "–° –Ω–µ–π –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ",
  "–Ø —Å–ø–æ–∫–æ–µ–Ω —Ä—è–¥–æ–º —Å –Ω–µ–π",
  "–Ø –µ–π –¥–æ–≤–µ—Ä—è—é",
  "–û–Ω–∞ –º–æ—è –æ–ø–æ—Ä–∞",
  "–Ø —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –ª—É—á—à–µ —Å –Ω–µ–π",
  "–í–Ω—É—Ç—Ä–∏ —Å–≤–µ—Ç",
  "–Ø –∂–∏–≤—É",
  "–Ø —Å—á–∞—Å—Ç–ª–∏–≤ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É",
  // Half.
  "–≠—Ç–æ –Ω–µ–≤—ã–Ω–æ—Å–∏–º–æ",
  "–Ø –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –¥–µ–ª–∞—Ç—å",
  "–ú–Ω–µ –±–æ–ª—å–Ω–æ",
  "–ö–∞–∂–µ—Ç—Å—è, —è —Ç–µ—Ä—è—é –µ—ë",
  "–û–Ω–∞ –æ—Ç–¥–∞–ª—è–µ—Ç—Å—è",
  "–Ø –µ–π –Ω–µ –Ω—É–∂–µ–Ω",
  "–Ø –≤ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–µ",
  "–ù–∞—Å –Ω–∏—á–µ–≥–æ –Ω–µ —Å–≤—è–∑—ã–≤–∞–µ—Ç",
  "–ú–µ–Ω—è –Ω–µ —Å–ª—ã—à–∞—Ç",
  "–û–Ω–∞ —Ö–æ–ª–æ–¥–Ω–∞",
  "–ú–µ–Ω—è –±—É–¥—Ç–æ –Ω–µ—Ç",
  "–ú–Ω–µ —Ç—è–∂–µ–ª–æ",
  "–Ø —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω",
  "–í—Å—ë —Ä—É—à–∏—Ç—Å—è",
  "–Ø –≤ –æ—Ç—á–∞—è–Ω–∏–∏",
  "–û–Ω–∞ –º–µ–Ω—è —Ä–∞–Ω–∏—Ç",
  "–ú—ã —á—É–∂–∏–µ",
  "–Ø —É—Å—Ç–∞–ª",
  "–ù–µ —Ö–æ—á—É –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å",
  "–Ø –≤ —Ç—É–ø–∏–∫–µ",
  "–Ø –ø—É—Å—Ç–æ–π",
  "–û–Ω–∞ –∑–ª–∞—è",
  "–Ø –æ–¥–∏–Ω",
  "–ù–µ—Ç —Å–º—ã—Å–ª–∞",
  "–û–Ω–∞ –º–µ–Ω—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç",
  "–≠—Ç–æ –∫–æ–Ω–µ—Ü",
  "–Ø –±–µ–∑ —Å–∏–ª",
  "–ú–Ω–µ —Å—Ç—Ä–∞—à–Ω–æ",
  "–Ø –Ω–µ —Å–ø—Ä–∞–≤–ª—è—é—Å—å",
  "–Ø –∫—Ä–∏—á—É –≤–Ω—É—Ç—Ä–∏",
  "–≠—Ç–æ –ª–æ–º–∞–µ—Ç –º–µ–Ω—è",
  "–Ø –Ω–µ–Ω–∞–≤–∏–∂—É –≤—Å—ë",
  "–û–Ω–∞ –≤—Å—ë —Ä–∞–∑—Ä—É—à–∏–ª–∞",
  "–ú–Ω–µ –Ω–µ–≤—ã–Ω–æ—Å–∏–º–æ —Å –Ω–µ–π",
  "–Ø —É–º–∏—Ä–∞—é –≤–Ω—É—Ç—Ä–∏",
  "–û–Ω–∞ –∂–µ—Å—Ç–æ–∫–∞",
  "–ë–æ–ª—å—à–µ –Ω–µ—Ç –ª—é–±–≤–∏",
  "–Ø –Ω–µ –≤–∞–∂–µ–Ω",
  "–Ø —Å–ª–æ–º–ª–µ–Ω",
  "–≠—Ç–æ –±–æ–ª—å",
  "–Ø –∏—Å—á–µ–∑–∞—é",
  "–û–Ω–∞ –º–µ–Ω—è –æ—Ç—Ç–æ–ª–∫–Ω—É–ª–∞",
  "–Ø –Ω–µ –Ω—É–∂–µ–Ω",
  "–ú–Ω–µ –ø–ª–æ—Ö–æ",
  "–ú–Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ",
  "–Ø —Å–¥–∞—é—Å—å",
  "–Ø –Ω–∏—á–µ–≥–æ –Ω–µ —á—É–≤—Å—Ç–≤—É—é",
  "–¢–æ—Å–∫–∞",
  "–Ø –ø–æ—Ç–µ—Ä—è–Ω",
  "–ú–Ω–µ —Ö–æ—á–µ—Ç—Å—è —É–π—Ç–∏",
  "–Ø –æ–¥–∏–Ω –∏ –≤—Å–µ–≥–¥–∞ –±—ã–ª",
];

const breakupReasons: Record<Collision["reason"], string> = {
  "fells out of love": "–ë–æ–ª—å—à–µ –Ω–µ –ª—é–±–ª—é –µ—ë",
  "wants different pace": "–û–Ω–∞ —Å–ª–∏—à–∫–æ–º —Ç–æ—Ä–æ–ø–∏—Ç",
  "emotionally drained": "–Ø –æ–ø—É—Å—Ç–æ—à—ë–Ω",
  "lack of freedom": "–ú–µ–Ω—è –¥—É—à–∏—Ç —ç—Ç–∞ —Å–≤—è–∑—å",
  "lack of understanding": "–û–Ω–∞ –º–µ–Ω—è –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç",
  "lack of trust": "–Ø –Ω–µ –º–æ–≥—É –µ–π –¥–æ–≤–µ—Ä—è—Ç—å",
  "unmet expectations": "–≠—Ç–æ –Ω–µ —Ç–æ, —á–µ–≥–æ —è –∂–¥–∞–ª",
  "lack of common goals": "–£ –Ω–∞—Å —Ä–∞–∑–Ω—ã–µ –ø—É—Ç–∏",
};

const exGoodQuotes: string[] = [
  "–û–Ω–∞ –±—ã–ª–∞ —Å–≤–µ—Ç–æ–º –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏",
  "–° –Ω–µ–π —è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å–µ–±—è –∂–∏–≤—ã–º",
  "–ú—ã –ø–µ—Ä–µ–∂–∏–ª–∏ –º–Ω–æ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ –≤–º–µ—Å—Ç–µ",
  "–ò–Ω–æ–≥–¥–∞ —Å–∫—É—á–∞—é –ø–æ –µ—ë —É–ª—ã–±–∫–µ",
  "–û–Ω–∞ –¥–µ–ª–∞–ª–∞ –º–µ–Ω—è –ª—É—á—à–µ",
];

export const exGoodEmojis: string[] = ["üòå", "üòä", "üôÇ", "ü•≤", "üòá"];

const exBadQuotes: string[] = [
  "–° –Ω–µ–π —è —Ç–µ—Ä—è–ª —Å–µ–±—è",
  "–û–Ω–∞ —Ä–∞–∑—Ä—É—à–∏–ª–∞ –º–æ—ë –¥–æ–≤–µ—Ä–∏–µ",
  "–Ø –±–æ–ª—å—à–µ –Ω–µ —Ö–æ—á—É —Ç–∞–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π",
  "–í—Å—ë –±—ã–ª–æ –ª–æ–∂—å—é",
  "–•—É–∂–µ –±—ã–ª–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ",
];

export const exBadEmojis: string[] = ["üòû", "üòî", "üò§", "üò†", "üò©"];
