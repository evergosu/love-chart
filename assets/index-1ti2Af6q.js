var M=Object.defineProperty;var S=(u,e,t)=>e in u?M(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t;var n=(u,e,t)=>S(u,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();class C{constructor(e,t,s,i){n(this,"currentDay",0);n(this,"lastDay");this.man=e,this.woman=t,this.collision=s,this.lastDay=i}simulateDay(){this.woman.decay(this.currentDay),this.man.decay(this.currentDay),this.woman.changeEmotions(this.currentDay),this.collision.check(this.currentDay),this.collision.checkBreakup(this.currentDay),this.collision.brakeUpDay&&(this.man.retainDiscontent(),this.woman.retainDiscontent(),this.lastDay=Math.floor(this.collision.brakeUpDay*1.5)),this.woman.save(),this.man.save(),this.currentDay++}simulateLife(){for(;this.currentDay<this.lastDay;)this.simulateDay()}}class U{constructor(e,t){n(this,"bound","none");n(this,"startDay",0);n(this,"brokeUp",null);n(this,"brakeUpDay",null);this.man=e,this.woman=t}handleLower(e){this.woman.value>-this.man.value&&this.stop(e)<=2&&this.man.retainCapacity()}handleNone(e){this.woman.value>=this.man.value&&(this.start(e,"upper"),this.woman.addDiscontent()),this.woman.value>0&&this.man.resetDiscontent(),this.woman.value<=-this.man.value&&(this.start(e,"lower"),this.man.looseCapacity(),this.man.addDiscontent(),this.woman.resetDiscontent())}handlePersistentNeglect(){this.woman.value<-this.man.capacity/3&&this.man.isRageFromDiscontent()?this.man.looseCapacity():this.man.addDiscontent()}handleUpper(e){this.woman.value<this.man.value&&this.stop(e)>=2&&this.woman.hate()}shouldCollide(e){return e>this.man.decayDuration&&e>this.woman.decayDuration}start(e,t){this.bound=t,this.startDay=e}stop(e){const t=e-this.startDay;return this.bound="none",this.startDay=0,t}check(e){if(this.shouldCollide(e))switch(this.handlePersistentNeglect(),this.bound){case"none":this.handleNone(e);break;case"upper":this.handleUpper(e);break;case"lower":this.handleLower(e);break}}checkBreakup(e){if(this.brakeUpDay!=null)return;const t=this.man.value<Math.floor(this.man.capacity/3);(this.woman.value<-this.man.capacity*.8||t)&&(this.brakeUpDay=e,this.brokeUp=t?"man":"woman")}}class x{constructor(e,t,s){n(this,"decayDuration");n(this,"decayStep");n(this,"discontent",0);n(this,"history",[]);this.value=e,this.thoughts=t;const[i,a]=s;this.decayDuration=Math.floor(Math.random()*(a-i)+i),this.decayStep=50/this.decayDuration}addDiscontent(){this.discontent++}hate(){this.discontent+=10}isRageFromDiscontent(){const e=Math.min(this.discontent*5,50);return Math.random()*100<=e}save(){this.history.push(this.value)}resetDiscontent(){this.discontent=0}retainDiscontent(){}}class P extends x{constructor(t,s,i){super(t,B,s);n(this,"bigEmotionDay",30);n(this,"smallEmotionDay",14);n(this,"amplitude",50);this.value=t,this.initialManCapacity=i}emote(t){this.value+=t}getEmotionAmplitude(){return this.amplitude*(1+this.discontent*.05)}addDiscontent(){super.addDiscontent(),this.emote(-(Math.random()*10+10))}changeEmotions(t){if(t>this.decayDuration){const s=this.getEmotionAmplitude();t%this.bigEmotionDay===0?this.emote((Math.random()-.5)*s):(t%this.smallEmotionDay===0||this.isRageFromDiscontent())&&this.emote((Math.random()-.5)*(s/2)),this.value=Math.max(-this.initialManCapacity,Math.min(this.initialManCapacity,this.value))}}decay(t){if(t<=this.decayDuration){const s=(Math.random()-.5)*this.decayStep*5,i=Math.random()<.9?-1:1;this.value+=i*(this.decayStep+s)}}retainDiscontent(){this.discontent>0&&(this.discontent-=this.discontent*.9)}}const B=["–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –ª—é–±–∏–º–æ–π","–û–Ω ‚Äî –º–æ–π —á–µ–ª–æ–≤–µ–∫","–° –Ω–∏–º —è –º–æ–≥—É –±—ã—Ç—å —Å–æ–±–æ–π","–ú–Ω–µ —Å–ø–æ–∫–æ–π–Ω–æ —Ä—è–¥–æ–º —Å –Ω–∏–º","–Ø —Å—á–∞—Å—Ç–ª–∏–≤–∞, —á—Ç–æ –æ–Ω —Ä—è–¥–æ–º","–Ø –ª—é–±–ª—é –µ–≥–æ –≤—Å–µ–π –¥—É—à–æ–π","–û–Ω –∑–∞–±–æ—Ç–ª–∏–≤—ã–π –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π","–ú—ã ‚Äî —Å–∏–ª—å–Ω–∞—è –ø–∞—Ä–∞","–Ø –≥–æ—Ä–∂—É—Å—å –Ω–∞—à–∏–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏","–û–Ω —É–º–µ–µ—Ç –º–µ–Ω—è –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å","–Ø –≤–∏–∂—É –≤ –Ω—ë–º –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å","–û–Ω –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è –ª—É—á—à–µ","–ú—ã –≤–º–µ—Å—Ç–µ —Ä–∞—Å—Ç—ë–º","–° –Ω–∏–º –ª–µ–≥–∫–æ –∏ —Ç–µ–ø–ª–æ","–Ø –º–æ–≥—É –µ–º—É –¥–æ–≤–µ—Ä—è—Ç—å","–û–Ω —Å–ª—É—à–∞–µ—Ç –∏ —Å–ª—ã—à–∏—Ç –º–µ–Ω—è","–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∫–∞–∫ –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –º–µ–Ω—è","–û–Ω —É–≤–∞–∂–∞–µ—Ç –º–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω—É–∂–Ω–æ–π","–û–Ω –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—è","–Ø –±–ª–∞–≥–æ–¥–∞—Ä–Ω–∞ –∑–∞ –Ω–µ–≥–æ","–° –Ω–∏–º –∂–∏–∑–Ω—å –ø–æ–ª–Ω–∞ —Å–º—ã—Å–ª–∞","–û–Ω –∑–∞–±–æ—Ç–∏—Ç—Å—è –æ –º–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö","–ú—ã –¥–æ–ø–æ–ª–Ω—è–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞","–û–Ω –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è —Å—á–∞—Å—Ç–ª–∏–≤–æ–π","–° –Ω–∏–º —è —Å–º–µ—é—Å—å –æ—Ç –¥—É—à–∏","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –∫—Ä–∞—Å–∏–≤–æ–π —Ä—è–¥–æ–º —Å –Ω–∏–º","–û–Ω –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –º–æ–∏–º –º–Ω–µ–Ω–∏–µ–º","–ú—ã –¥–µ–ª–∞–µ–º —à–∞–≥–∏ –Ω–∞–≤—Å—Ç—Ä–µ—á—É","–û–Ω —É–º–µ–µ—Ç –º–∏—Ä–∏—Ç—å—Å—è –ø–µ—Ä–≤—ã–º","–û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–æ—é —É—è–∑–≤–∏–º–æ—Å—Ç—å","–û–Ω –∑–∞–º–µ—á–∞–µ—Ç –º–µ–ª–æ—á–∏","–Ø –º–æ–≥—É –≥–æ–≤–æ—Ä–∏—Ç—å —Å –Ω–∏–º –æ —á—ë–º —É–≥–æ–¥–Ω–æ","–û–Ω —Ä—è–¥–æ–º, –∫–æ–≥–¥–∞ –º–Ω–µ –ø–ª–æ—Ö–æ","–ú—ã –≤–º–µ—Å—Ç–µ –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞–µ–º —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏","–û–Ω –¥–∞—ë—Ç –º–Ω–µ —Å–≤–æ–±–æ–¥—É","–Ø —É–≤–µ—Ä–µ–Ω–∞ –≤ –Ω—ë–º","–Ø —á—É–≤—Å—Ç–≤—É—é —Ç–µ–ø–ª–æ –µ–≥–æ —Å–ª–æ–≤","–û–Ω —Ä–∞–∑–¥–µ–ª—è–µ—Ç –º–æ–∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏","–ú—ã –≤–º–µ—Å—Ç–µ —Å–æ–∑–¥–∞—ë–º —É—é—Ç","–û–Ω —Å—Ç–∞—Ä–∞–µ—Ç—Å—è —Ä–∞–¥–∏ –Ω–∞—Å","–ò–Ω–æ–≥–¥–∞ —è —É—Å—Ç–∞—é, –Ω–æ —è –≤—Å—ë —Ä–∞–≤–Ω–æ –µ–≥–æ –ª—é–±–ª—é","–Ø —Ö–æ—á—É –±–æ–ª—å—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è","–ò–Ω–æ–≥–¥–∞ –æ–Ω –Ω–µ —Å–ª—ã—à–∏—Ç, –Ω–æ —è —Å—Ç–∞—Ä–∞—é—Å—å –æ–±—ä—è—Å–Ω–∏—Ç—å","–Ø —Å–∫—É—á–∞—é –ø–æ —Ä–æ–º–∞–Ω—Ç–∏–∫–µ","–ú—ã –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–¥–∞–ª–∏–ª–∏—Å—å","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ –¥–æ –∫–æ–Ω—Ü–∞ –ø–æ–Ω—è—Ç–æ–π","–ú–Ω–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç–∏","–ò–Ω–æ–≥–¥–∞ –æ–Ω —Ö–æ–ª–æ–¥–µ–Ω","–Ø —Ö–æ—á—É, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –±–ª–∏–∂–µ","–Ø –¥–µ—Ä–∂—É –º–Ω–æ–≥–æ–µ –≤ —Å–µ–±–µ","–Ø –Ω–µ –≤—Å–µ–≥–¥–∞ —á—É–≤—Å—Ç–≤—É—é –µ–≥–æ —É—á–∞—Å—Ç–∏–µ","–û–Ω —Å—Ç–∞–ª –º–µ–Ω—å—à–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å—Å—è –º–Ω–æ–π","–Ø —Å–∫—É—á–∞—é –ø–æ —Ç–µ–º –≤—Ä–µ–º–µ–Ω–∞–º","–Ø –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –æ–Ω —á—É–≤—Å—Ç–≤—É–µ—Ç","–ú–Ω–µ —Ç—è–∂–µ–ª–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–≤–æ–∏—Ö –∂–µ–ª–∞–Ω–∏—è—Ö","–ò–Ω–æ–≥–¥–∞ —è —á—É–≤—Å—Ç–≤—É—é –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ —Ä—è–¥–æ–º —Å –Ω–∏–º","–Ø —É—Å—Ç–∞—é –æ—Ç —Ä–∞–≤–Ω–æ–¥—É—à–∏—è","–Ø —á—É–≤—Å—Ç–≤—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é","–û–Ω –±—É–¥—Ç–æ –Ω–µ –∑–∞–º–µ—á–∞–µ—Ç –º–æ–∏—Ö —ç–º–æ—Ü–∏–π","–ú–Ω–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤","–Ø —Å—Ç–∞—Ä–∞—é—Å—å ‚Äî –æ–Ω –º–æ–ª—á–∏—Ç","–Ø –Ω–∞—á–∏–Ω–∞—é —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è","–Ø –Ω–µ —É–≤–µ—Ä–µ–Ω–∞ –≤ –µ–≥–æ —á—É–≤—Å—Ç–≤–∞—Ö","–û–Ω —Å—Ç–∞–ª —á—É–∂–∏–º","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ–Ω—É–∂–Ω–æ–π","–ú–Ω–µ –±–æ–ª—å–Ω–æ –æ—Ç –µ–≥–æ —Å–ª–æ–≤","–û–Ω –≤—Å—ë —á–∞—â–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è","–Ø –±–æ—é—Å—å –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å–ª–∞–±–æ–π","–ò–Ω–æ–≥–¥–∞ —è –Ω–µ —É–∑–Ω–∞—é –µ–≥–æ","–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —è –±–æ–ª—å—à–µ –≤–∫–ª–∞–¥—ã–≤–∞—é—Å—å","–Ø –Ω–µ —á—É–≤—Å—Ç–≤—É—é –æ—Ç–∫–ª–∏–∫–∞","–ú–Ω–µ —Ç—è–∂–µ–ª–æ –±—ã—Ç—å —Ä—è–¥–æ–º","–Ø —Ç–µ—Ä—è—é —Å–µ–±—è –≤ —ç—Ç–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö","–û–Ω –æ—Ç–¥–∞–ª—è–µ—Ç—Å—è –≤—Å—ë –±–æ–ª—å—à–µ","–Ø —á—É–≤—Å—Ç–≤—É—é –≤–∏–Ω—É –∑–∞ –≤—Å—ë","–Ø –ø–ª–∞—á—É –≤ –æ–¥–∏–Ω–æ—á–∫—É","–Ø —É—Å—Ç–∞–ª–∞ –±–æ—Ä–æ—Ç—å—Å—è","–û–Ω –º–µ–Ω—è –Ω–µ —Å–ª—ã—à–∏—Ç","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ—Ü–µ–Ω–Ω–æ–π","–ú—ã –∫–∞–∫ —Å–æ—Å–µ–¥–∏","–Ø –±–æ—é—Å—å –ø—Ä–∏–∑–Ω–∞—Ç—å—Å—è –≤ —Å–≤–æ–∏—Ö –º—ã—Å–ª—è—Ö","–Ø –Ω–µ —á—É–≤—Å—Ç–≤—É—é –ª—é–±–≤–∏","–Ø –¥–µ—Ä–∂—É—Å—å –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–∏–ª","–ò–Ω–æ–≥–¥–∞ —è –º–µ—á—Ç–∞—é –∏—Å—á–µ–∑–Ω—É—Ç—å","–ú–Ω–µ —Å—Ç—Ä–∞—à–Ω–æ –æ—Å—Ç–∞—Ç—å—Å—è, –Ω–æ —Å—Ç—Ä–∞—à–Ω–µ–µ —É–π—Ç–∏","–Ø –±–æ–ª—å—à–µ –Ω–µ –≤–µ—Ä—é –≤ –Ω–∞—Å","–Ø –±—É–¥—Ç–æ –ø—É—Å—Ç–∞—è –≤–Ω—É—Ç—Ä–∏","–Ø –Ω–µ —Ö–æ—á—É –±–æ–ª—å—à–µ –Ω–∞–¥–µ—è—Ç—å—Å—è","–û–Ω –∫–∞–∫ –±—É–¥—Ç–æ —Ä—è–¥–æ–º –∏ –Ω–µ —Ä—è–¥–æ–º","–Ø —É—Å—Ç–∞–ª–∞ –º–æ–ª—á–∞—Ç—å","–Ø –Ω–µ –∑–Ω–∞—é, –∫—Ç–æ —è —Ä—è–¥–æ–º —Å –Ω–∏–º","–Ø —á—É–≤—Å—Ç–≤—É—é –∫–æ–Ω–µ—Ü","–Ø –±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É –ø—Ä–∏—Ç–≤–æ—Ä—è—Ç—å—Å—è","–í—Å—ë, —á—Ç–æ –±—ã–ª–æ, –∏—Å—á–µ–∑–ª–æ","–Ø —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ –∏—Å—á–µ–∑–∞—é","–Ø –Ω–µ –≤–∏–∂—É —Å–º—ã—Å–ª–∞","–ú–Ω–µ –±–æ–ª—å–Ω–æ –æ—Ç –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π","–Ø —É–∂–µ –º—ã—Å–ª–µ–Ω–Ω–æ –ø—Ä–æ—â–∞—é—Å—å","–Ø —Å–ª–æ–º–ª–µ–Ω–∞","–Ø —Ö–æ—á—É —É–π—Ç–∏","–Ø –±–æ–ª—å—à–µ –µ–≥–æ –Ω–µ –ª—é–±–ª—é","–Ø —á—É–≤—Å—Ç–≤—É—é —Ç–æ–ª—å–∫–æ –ø—É—Å—Ç–æ—Ç—É","–≠—Ç–æ –∫–æ–Ω–µ—Ü"];class E extends x{constructor(t,s){super(t,L,s);n(this,"resilience",0);n(this,"rancor",.9);this.capacity=t}decay(t){if(t<=this.decayDuration){const s=t/this.decayDuration;this.value=this.capacity-s**2*(this.capacity-100)}}looseCapacity(){this.resilience++,this.value*=this.rancor}retainCapacity(){this.value*=1+.03*this.resilience}retainDiscontent(){this.discontent>0&&(this.discontent-=this.discontent*.5)}}const L=["–Ø –ª—é–±–ª—é –µ—ë –≤—Å–µ–º —Å–µ—Ä–¥—Ü–µ–º","–ú—ã —Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥ –¥–ª—è –¥—Ä—É–≥–∞","–° –Ω–µ–π —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –¥–æ–º–∞","–ö–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç —Å –Ω–µ–π ‚Äî –ø–æ–¥–∞—Ä–æ–∫","–Ø —Å—á–∞—Å—Ç–ª–∏–≤ —Ä—è–¥–æ–º —Å –Ω–µ–π","–û–Ω–∞ ‚Äî –º–æ—è –æ–ø–æ—Ä–∞","–Ø –≥–æ—Ä–∂—É—Å—å –Ω–∞—à–∏–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏","–° –∫–∞–∂–¥—ã–º –¥–Ω—ë–º —è –ª—é–±–ª—é –µ—ë –±–æ–ª—å—à–µ","–û–Ω–∞ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—è","–ú—ã ‚Äî –∏–¥–µ–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞","–Ø —á—É–≤—Å—Ç–≤—É—é –µ—ë –ª—é–±–æ–≤—å","–û–Ω–∞ –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è –ª—É—á—à–µ","–ú—ã –ø–æ–Ω–∏–º–∞–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –±–µ–∑ —Å–ª–æ–≤","–Ø –¥–æ–≤–µ—Ä—è—é –µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é","–ú–Ω–µ —Å–ø–æ–∫–æ–π–Ω–æ —Ä—è–¥–æ–º —Å –Ω–µ–π","–Ø —Å–∫—É—á–∞—é –ø–æ –Ω–µ–π, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –æ–Ω–∞ —Ä—è–¥–æ–º","–ú—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ –æ–¥–Ω–æ–π –≤–æ–ª–Ω–µ","–° –Ω–µ–π —è —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –º—è–≥—á–µ","–û–Ω–∞ –∑–∞–±–æ—Ç–∏—Ç—Å—è –æ–±–æ –º–Ω–µ","–Ø —Ö–æ—á—É –±—ã—Ç—å —Å –Ω–µ–π –≤—Å–µ–≥–¥–∞","–ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞","–Ø —Ü–µ–Ω—é –µ—ë –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å","–ù–∞—à–∏ –º–µ—á—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç","–û–Ω–∞ –¥–µ–ª–∞–µ—Ç –º–æ—é –∂–∏–∑–Ω—å —è—Ä—á–µ","–ú–Ω–µ –ª–µ–≥–∫–æ —Å –Ω–µ–π –≥–æ–≤–æ—Ä–∏—Ç—å","–ú—ã —É–º–µ–µ–º —Å–º–µ—è—Ç—å—Å—è –≤–º–µ—Å—Ç–µ","–° –Ω–µ–π —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –∂–∏–≤—ã–º","–û–Ω–∞ –ø–æ–Ω–∏–º–∞–µ—Ç –º–µ–Ω—è —Å –ø–æ–ª—É—Å–ª–æ–≤–∞","–ù–∞—à–∏ —Å–µ—Ä–¥—Ü–∞ –±—å—é—Ç—Å—è –≤ —É–Ω–∏—Å–æ–Ω","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω—É–∂–Ω—ã–º","–Ø –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞ –Ω–µ—ë","–ú—ã —É—á–∏–º—Å—è –¥—Ä—É–≥ —É –¥—Ä—É–≥–∞","–û–Ω–∞ –¥–∞—ë—Ç –º–Ω–µ —Å–∏–ª—ã","–° –Ω–µ–π —è –Ω–µ –±–æ—é—Å—å –±—É–¥—É—â–µ–≥–æ","–Ø —É–≤–∞–∂–∞—é –µ—ë –º–Ω–µ–Ω–∏–µ","–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Å–ª—É—à–∞—Ç—å –µ—ë","–° –Ω–µ–π –≤—Å—ë —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω—ã–º","–Ø –¥–æ–≤–µ—Ä—è—é –Ω–∞—à–µ–º—É –ø—É—Ç–∏","–û–Ω–∞ ‚Äî –º–æ—è –ª—É—á—à–∞—è –ø–æ–¥—Ä—É–≥–∞","–Ø —á—É–≤—Å—Ç–≤—É—é –≥–∞—Ä–º–æ–Ω–∏—é","–ú—ã —É–º–µ–µ–º –º–∏—Ä–∏—Ç—å—Å—è","–Ø –∑–∞–º–µ—á–∞—é, –∫–∞–∫ –æ–Ω–∞ –º–µ–Ω—è–µ—Ç—Å—è","–ò–Ω–æ–≥–¥–∞ —Å–ª–æ–∂–Ω–æ, –Ω–æ —è –∑–Ω–∞—é, –∑–∞—á–µ–º –º—ã –≤–º–µ—Å—Ç–µ","–Ø —Å—Ç–∞—Ä–∞—é—Å—å –µ—ë –ø–æ–Ω—è—Ç—å","–Ø –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤","–ù–∞–º –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –≤–º–µ—Å—Ç–µ","–Ø —É—Å—Ç–∞–ª, –Ω–æ –æ–Ω–∞ –≤–∞–∂–Ω–∞ –¥–ª—è –º–µ–Ω—è","–ò–Ω–æ–≥–¥–∞ –º–Ω–µ –Ω—É–∂–Ω–æ –ø–æ–±—ã—Ç—å –æ–¥–Ω–æ–º—É","–ú—ã —á–∞—Å—Ç–æ —Å–ø–æ—Ä–∏–º –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è","–Ø —á—É–≤—Å—Ç–≤—É—é –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ","–ò–Ω–æ–≥–¥–∞ —è –Ω–µ –ø–æ–Ω–∏–º–∞—é –µ—ë","–ú–µ–Ω—è —Ä–∞–∑–¥—Ä–∞–∂–∞—é—Ç –º–µ–ª–æ—á–∏","–Ø –±–æ—é—Å—å, —á—Ç–æ –æ—Ç–¥–∞–ª—è—é—Å—å","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –æ–¥–∏–Ω–æ–∫–∏–º —Ä—è–¥–æ–º —Å –Ω–µ–π","–Ø —Å–∫—É—á–∞—é –ø–æ —Ç–æ–º—É, –∫–∞–∫ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ","–ú–Ω–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –µ—ë —Ç–µ–ø–ª–∞","–Ø –Ω–∞—á–∏–Ω–∞—é —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è","–ú—ã –∫–∞–∫ –±—É–¥—Ç–æ –≥–æ–≤–æ—Ä–∏–º –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö","–ò–Ω–æ–≥–¥–∞ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è –µ–π –±–µ–∑—Ä–∞–∑–ª–∏—á–µ–Ω","–Ø –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –µ–π —ç—Ç–æ —Å–∫–∞–∑–∞—Ç—å","–Ø –¥–µ—Ä–∂—É –≤—Å—ë –≤ —Å–µ–±–µ","–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –Ω–∞—Å —á—Ç–æ-—Ç–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç","–Ø –≤—Å—ë —á–∞—â–µ –º–æ–ª—á—É","–Ø —É—Å—Ç–∞—é –æ—Ç —Å—Å–æ—Ä","–Ø –Ω–µ —É–∑–Ω–∞—é –µ—ë","–Ø —á—É–≤—Å—Ç–≤—É—é –ø—É—Å—Ç–æ—Ç—É","–ú–Ω–µ —Ç—è–∂–µ–ª–æ —Ä—è–¥–æ–º —Å –Ω–µ–π","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –≤–∏–Ω–æ–≤–∞—Ç—ã–º","–ú—ã –∫–∞–∫ —á—É–∂–∏–µ","–Ø –Ω–µ —á—É–≤—Å—Ç–≤—É—é –ø–æ–¥–¥–µ—Ä–∂–∫–∏","–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —è –±–æ–ª—å—à–µ —Å—Ç–∞—Ä–∞—é—Å—å","–Ø –±–æ—é—Å—å –±—ã—Ç—å —Å–æ–±–æ–π","–û–Ω–∞ –æ—Ç–¥–∞–ª—è–µ—Ç—Å—è","–Ø –Ω–µ –∑–Ω–∞—é, –ª—é–±–∏—Ç –ª–∏ –æ–Ω–∞ –º–µ–Ω—è","–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ–≤–∞–∂–Ω—ã–º","–ú—ã —Å–ª–∏—à–∫–æ–º —Ä–∞–∑–Ω—ã–µ","–Ø —á—É–≤—Å—Ç–≤—É—é –±–µ–∑—ã—Å—Ö–æ–¥–Ω–æ—Å—Ç—å","–Ø –Ω–µ —Ö–æ—á—É –∏–¥—Ç–∏ –¥–æ–º–æ–π","–ú–Ω–µ —Å—Ç—Ä–∞—à–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–∞–≤–¥—É","–Ø –¥—É–º–∞—é, —á—Ç–æ —ç—Ç–æ –∫–æ–Ω–µ—Ü","–Ø –Ω–µ —á—É–≤—Å—Ç–≤—É—é –ª—é–±–≤–∏","–Ø –Ω–µ –≤–∏–∂—É –±—É–¥—É—â–µ–≥–æ","–ú—ã –ø—Ä–æ—Å—Ç–æ –≤–º–µ—Å—Ç–µ –ø–æ –ø—Ä–∏–≤—ã—á–∫–µ","–û–Ω–∞ –±–æ–ª—å—à–µ –Ω–µ —É–ª—ã–±–∞–µ—Ç—Å—è –º–Ω–µ","–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —è –æ–¥–∏–Ω –≤ —ç—Ç–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö","–Ø —É—Å—Ç–∞–ª –ø—ã—Ç–∞—Ç—å—Å—è","–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ —Ç–µ—Ä—è—é —Å–µ–±—è","–ò–Ω–æ–≥–¥–∞ —è —Ö–æ—á—É –≤—Å—ë –±—Ä–æ—Å–∏—Ç—å","–Ø –Ω–µ –≤–µ—Ä—é –≤ –Ω–∞—Å","–ú–Ω–µ –±–æ–ª—å–Ω–æ –æ—Ç –µ—ë –º–æ–ª—á–∞–Ω–∏—è","–Ø –Ω–µ –∑–Ω–∞—é, –∑–∞—á–µ–º –º—ã –≤–º–µ—Å—Ç–µ","–Ø —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ —É–º–∏—Ä–∞–µ—Ç –ª—é–±–æ–≤—å","–Ø –±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É","–í—Å—ë –ø–æ—Ç–µ—Ä—è–ª–æ —Å–º—ã—Å–ª","–Ø —á—É–≤—Å—Ç–≤—É—é –∫–æ–Ω–µ—Ü","–Ø —É–∂–µ –ø—Ä–æ—â–∞—é—Å—å —Å –Ω–µ–π –≤ –º—ã—Å–ª—è—Ö","–Ø —Å–ª–æ–º–ª–µ–Ω","–Ø –ø—É—Å—Ç –≤–Ω—É—Ç—Ä–∏","–Ø —Ö–æ—á—É —É–π—Ç–∏","–Ø –Ω–µ –ª—é–±–ª—é –µ—ë –±–æ–ª—å—à–µ","–Ø —á—É–≤—Å—Ç–≤—É—é —Ç–æ–ª—å–∫–æ –±–æ–ª—å","–≠—Ç–æ –±—ã–ª –∫–æ–Ω–µ—Ü"];class k{constructor(e){n(this,"ctx");n(this,"logicalHeight",0);n(this,"logicalWidth",0);n(this,"scale",1);n(this,"mapX",e=>e);this.canvas=e,this.ctx=e.getContext("2d"),this.adaptCanvasToContainer(e)}adaptCanvasToContainer(e){this.resize=this.resize.bind(this),this.resize(),new ResizeObserver(this.resize).observe(e)}resize(){const e=window.devicePixelRatio||1,t=this.canvas.getBoundingClientRect(),s=Math.floor(t.width*e),i=Math.floor(t.height*e);(this.canvas.width!==s||this.canvas.height!==i)&&(this.canvas.width=s,this.canvas.height=i,this.logicalWidth=t.width,this.logicalHeight=t.height,this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(e,e))}mapY(e){return this.logicalHeight/2-e*this.scale}drawCanvas(e,t,s){this.ctx.clearRect(0,0,this.logicalWidth,this.logicalHeight),this.mapX=i=>(i-e)/t*this.logicalWidth,this.scale=this.logicalHeight/2*.8/s,this.ctx.lineWidth=2*this.scale}}class X extends k{constructor(e){super(e)}drawAxis(){this.ctx.strokeStyle="#888",this.ctx.beginPath(),this.ctx.moveTo(0,this.mapY(0)),this.ctx.lineTo(this.logicalWidth,this.mapY(0)),this.ctx.stroke()}drawBlueTunnel(e,t,s){this.ctx.fillStyle="rgba(100, 149, 237, 0.2)",this.ctx.beginPath(),this.ctx.moveTo(this.mapX(t),this.mapY(e[t]));for(let i=t;i<=s;i++)this.ctx.lineTo(this.mapX(i),this.mapY(e[i]));for(let i=s;i>=t;i--)this.ctx.lineTo(this.mapX(i),this.mapY(-e[i]));this.ctx.closePath(),this.ctx.fill()}drawGrayTunnel(e,t,s){this.ctx.fillStyle="rgba(160, 160, 160, 0.2)",this.ctx.beginPath(),this.ctx.moveTo(this.mapX(t),this.mapY(e[t]));for(let i=t;i<=s;i++)this.ctx.lineTo(this.mapX(i),this.mapY(e[i]));for(let i=s;i>=t;i--)this.ctx.lineTo(this.mapX(i),this.mapY(-e[i]));this.ctx.closePath(),this.ctx.fill()}drawTunnel(e,t,s,i,a){const h=Math.max(i,0),r=t.brakeUpDay!=null&&t.brakeUpDay<s?t.brakeUpDay:Math.min(s,i+a);if(this.drawBlueTunnel(e,h,r),t.brakeUpDay!=null){const o=Math.max(i,t.brakeUpDay);this.drawGrayTunnel(e,o,s)}}drawRedLine(e,t,s){this.ctx.beginPath(),this.ctx.strokeStyle="#ff4f8b",this.ctx.moveTo(this.mapX(t),this.mapY(e[t])),t&&this.ctx.moveTo(this.mapX(t),this.mapY(e[t]));for(let i=t;i<=s;i++)this.ctx.lineTo(this.mapX(i),this.mapY(e[i]));this.ctx.stroke()}drawGrayLine(e,t,s){this.ctx.beginPath(),this.ctx.strokeStyle="#aaa";let i=0,a=e[t],h=!1;this.ctx.moveTo(this.mapX(t),this.mapY(a));for(let r=t;r<s;r++){const o=e[r];h?this.ctx.lineTo(this.mapX(r),this.mapY(i)):((o===0||o*a<0)&&(h=!0,i=o),this.ctx.lineTo(this.mapX(r),this.mapY(o)),a=o)}this.ctx.stroke()}drawWomanLine(e,t,s,i,a){const h=Math.max(i,0),r=t.brakeUpDay!=null&&t.brakeUpDay<s?t.brakeUpDay:Math.min(s,i+a);this.drawRedLine(e,h,r),t.brakeUpDay!=null&&s>t.brakeUpDay&&this.drawGrayLine(e,r,s)}drawMarker(e,t,s){const i=this.mapX(e),a=this.mapY(t);this.ctx.save(),this.ctx.fillStyle="#000",this.ctx.font="24px sans-serif",this.ctx.textAlign="center",this.ctx.fillText("‚úÇÔ∏è",i,this.mapY(-10)),this.ctx.beginPath(),this.ctx.moveTo(i,this.mapY(0)),this.ctx.lineTo(i,a),this.ctx.strokeStyle="#000",this.ctx.stroke(),this.ctx.fillText(s,i,a),this.ctx.restore()}drawBreakup(e,t,s,i){if(s.brakeUpDay!=null&&i>=s.brakeUpDay){const a=s.brokeUp==="man",h=a?-e[s.brakeUpDay]:t[s.brakeUpDay],r=a?"‚ôÇÔ∏è":"‚ôÄÔ∏è";this.drawMarker(s.brakeUpDay,h,r)}}draw(e,t,s,i,a,h,r){this.drawCanvas(a,h,r),this.drawAxis(),this.drawTunnel(e,s,i,a,h),this.drawWomanLine(t,s,i,a,h),this.drawBreakup(e,t,s,i)}}class A extends k{constructor(t){super(t);n(this,"currentSpacing",0);n(this,"offset",0);n(this,"manThought","");n(this,"womanThought","")}drawCharacter(t,s,i){const o=this.logicalHeight/2-50*this.scale;this.offset=o,this.ctx.save(),this.ctx.strokeStyle=i,this.ctx.fillStyle=i,this.ctx.lineWidth=8,this.ctx.beginPath(),this.ctx.moveTo(t,o),this.ctx.lineTo(t,o+40),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t-20,o+40/2),this.ctx.lineTo(t+20,o+40/2),this.ctx.stroke();const f=o+40;this.ctx.beginPath(),this.ctx.moveTo(t,f),this.ctx.lineTo(t-20,f+20),this.ctx.moveTo(t,f),this.ctx.lineTo(t+20,f+20),this.ctx.stroke(),this.ctx.font="42px serif",this.ctx.textAlign="center",this.ctx.fillText(s,t,o+5),this.ctx.restore()}getEmoji(t,s,i){return s.brakeUpDay&&i>=s.brakeUpDay?"üòê":i<t.decayDuration||t.history[i]>100?"üòç":t.history[i]>80?"üòä":t.history[i]<60?"ü•∫":t.history[i]<0?"üò°":t.discontent>20?"üò≠":t.discontent>10?"üò°":t.discontent>5?"üòï":"üòê"}drawSpeechBubble(t,s,i,a,h,r){t.font="14px sans-serif";const d=t.measureText(s).width+10*2,p=this.logicalWidth,m=6;let c=i-d/2;r?(c+=80,c+d>p-m&&(c=p-m-d),c<m&&(c=m)):(c-=80,c<m&&(c=m),c+d>p-m&&(c=p-m-d));const l=h==="up"?a-24-10:a+10,g=c+d/2;t.beginPath(),t.moveTo(c+10,l),t.lineTo(c+d-10,l),t.quadraticCurveTo(c+d,l,c+d,l+10),t.lineTo(c+d,l+24-10),t.quadraticCurveTo(c+d,l+24,c+d-10,l+24),t.lineTo(c+10,l+24),t.quadraticCurveTo(c,l+24,c,l+24-10),t.lineTo(c,l+10),t.quadraticCurveTo(c,l,c+10,l),t.closePath(),t.fillStyle="rgba(0,0,0,0.7)",t.fill(),t.beginPath(),t.moveTo(i,this.offset-20),h==="up"?(t.lineTo(g-6,l+24),t.lineTo(g+6,l+24)):(t.lineTo(g-6,l),t.lineTo(g+6,l)),t.closePath(),t.fill(),t.fillStyle="white",t.textAlign="center",t.textBaseline="middle",t.fillText(s,g,l+24/2)}draw(t,s,i,a,h,r){this.drawCanvas(0,h,r);const o=Math.max(0,Math.min(a,t.history.length-1,s.history.length-1));this.ctx.clearRect(0,0,this.logicalWidth,this.logicalHeight);const f=this.logicalWidth*.8,w=Math.abs(s.history[o]-t.history[o])*2,y=Math.min(w,f),d=this.logicalWidth/2,p=.1;this.currentSpacing+=(y-this.currentSpacing)*p;const m=d-this.currentSpacing/2,c=d+this.currentSpacing/2;if(this.drawCharacter(m,this.getEmoji(t,i,o),"#4682B4"),this.drawCharacter(c,this.getEmoji(s,i,o),"#FF69B4"),a%30===0){const l=Math.floor(Math.random()*100)-5;this.manThought=t.thoughts.at(l)??"",this.womanThought=s.thoughts.at(l)??""}this.manThought&&this.drawSpeechBubble(this.ctx,this.manThought,m,this.offset-20,"up",!1),this.womanThought&&this.drawSpeechBubble(this.ctx,this.womanThought,c,this.offset-50,"up",!0)}}class I{constructor(){n(this,"currentDay");n(this,"brakeUpDay");n(this,"brokeUp");this.currentDay=document.getElementById("current-day"),this.brokeUp=document.getElementById("broke-up"),this.brakeUpDay=document.getElementById("brake-up-day")}formatDuration(e){const t=Math.floor(e/365),s=Math.floor(e%365/30),i=Math.floor(e%30);return`${t.toString().padStart(2,"0")}y ${s.toString().padStart(2,"0")}m ${i.toString().padStart(2,"0")}d`}updateCurrentDay(e){this.currentDay.textContent=typeof e=="number"?this.formatDuration(e):e}updateBrakeUpDay(e){this.brakeUpDay.textContent=typeof e=="number"?this.formatDuration(e):e}updateBrokeUp(e){this.brokeUp.textContent=typeof e=="number"?this.formatDuration(e):e}}class Y{constructor(){n(this,"newAtMaxButton");n(this,"newAtMax");n(this,"down");n(this,"up");this.up=document.getElementById("speed-up"),this.down=document.getElementById("speed-down"),this.newAtMax=document.getElementById("new-at-max"),this.newAtMaxButton=document.getElementById("new-at-max-button"),this.newAtMaxButton.onclick=()=>window.location.reload()}updateNewAtMax(e){this.newAtMax.textContent=e.toString()}}class R{constructor(e,t,s,i,a,h){n(this,"currentDay",0);n(this,"frameId",null);n(this,"graph");n(this,"isPlaying",!1);n(this,"lastTickTime",performance.now());n(this,"scene");n(this,"timeline");n(this,"info",new I);n(this,"controls",new Y);n(this,"refreshRate",60);this.man=e,this.woman=t,this.collision=s,this.totalDays=i,this.daysPerSecond=a,this.frameDays=h,this.estimateRefreshRate(o=>{this.refreshRate=o,console.log("Estimated refresh rate:",o,"Hz")});const r=Number(window.localStorage.getItem("daysPerSecond"));r?this.daysPerSecond=r:this.daysPerSecond=a,this.tick=this.tick.bind(this),this.graph=new X(document.getElementById("graph")),this.scene=new A(document.getElementById("scene")),this.timeline=document.getElementById("timeline"),this.controls.up.onclick=()=>this.updateSpeed(10),this.controls.down.onclick=()=>this.updateSpeed(-10),this.setupCanvasDrag(document.getElementById("graph")),this.timeline.max=String(i),this.timeline.oninput=()=>{this.seek(Number(this.timeline.value))}}estimateRefreshRate(e,t=60,s=[60,120,144,165,240]){const i=[];let a=performance.now();function h(r){const o=r-a;if(a=r,i.push(o),i.length<t)requestAnimationFrame(h);else{const f=i.filter(p=>p>5&&p<100),y=1e3/(f.reduce((p,m)=>p+m,0)/f.length),d=s.reduce((p,m)=>Math.abs(m-y)<Math.abs(p-y)?m:p);e(d)}}requestAnimationFrame(h)}updateSpeed(e){const t=Math.max(0,this.daysPerSecond+e);this.daysPerSecond=t,window.localStorage.setItem("daysPerSecond",String(t))}setupCanvasDrag(e){let t=!1,s=0;const i=a=>{const h=a-s;s=a;const r=Math.max(1,this.frameDays),o=e.clientWidth/r,f=Math.round(h/o);this.seek(this.currentDay-f)};e.addEventListener("mousedown",a=>{t=!0,s=a.clientX,this.pause()}),window.addEventListener("mousemove",a=>{t&&i(a.clientX)}),window.addEventListener("mouseup",()=>{t=!1,this.play()}),e.addEventListener("touchstart",a=>{a.touches.length===1&&(t=!0,s=a.touches[0].clientX,this.pause())},{passive:!0}),window.addEventListener("touchmove",a=>{!t||a.touches.length!==1||(a.preventDefault(),i(a.touches[0].clientX))},{passive:!1}),window.addEventListener("touchend",()=>{t=!1,this.play()})}updateFrame(e){const t=Math.max(0,e-this.frameDays);this.graph.draw(this.man.history,this.woman.history,this.collision,Math.floor(e),Math.floor(t),this.frameDays,this.man.capacity),this.scene.draw(this.man,this.woman,this.collision,Math.floor(e)-1,this.frameDays,this.man.capacity),this.timeline.value=String(e),this.updateViews(e)}updateViews(e){this.info.updateCurrentDay(e);const t=this.collision.brakeUpDay&&e>=this.collision.brakeUpDay;this.info.updateBrokeUp(t?this.collision.brokeUp:"not yet"),this.info.updateBrakeUpDay(t?this.collision.brakeUpDay:"not yet"),this.controls.updateNewAtMax(this.daysPerSecond)}play(){this.isPlaying||(this.isPlaying=!0,this.lastTickTime=performance.now(),this.frameId=requestAnimationFrame(e=>this.tick(e)))}pause(){this.frameId&&cancelAnimationFrame(this.frameId),this.isPlaying=!1}stop(){this.pause(),this.currentDay=0,this.frameId=null,this.lastTickTime=performance.now()}forward(e=10){this.pause(),this.currentDay=Math.min(this.totalDays,this.currentDay+e),this.lastTickTime=performance.now(),this.updateFrame(this.currentDay)}rewind(e=10){this.pause(),this.currentDay=Math.max(0,this.currentDay-e),this.lastTickTime=performance.now(),this.updateFrame(this.currentDay)}seek(e){this.pause();const t=Math.max(0,Math.min(this.totalDays,e));this.currentDay=t,this.lastTickTime=performance.now(),this.updateFrame(this.currentDay)}tick(e){if(!this.isPlaying)return;const t=(e-this.lastTickTime)/1e3;if(t<1/this.refreshRate){this.frameId=requestAnimationFrame(this.tick);return}if(this.lastTickTime=e,this.currentDay+=t*this.daysPerSecond,this.currentDay>=this.totalDays){this.currentDay=this.totalDays,this.updateFrame(this.currentDay),this.pause();return}this.updateFrame(this.currentDay),this.frameId=requestAnimationFrame(this.tick)}}const D=new E(150,[14,90]),b=new P(150,[14,90],D.value),T=new U(D,b),F=100*365,v=new C(D,b,T,F);v.simulateLife();const W=new R(D,b,T,v.lastDay,30,365);W.play();
